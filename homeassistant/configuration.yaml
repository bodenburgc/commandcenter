# Home Assistant Configuration
# Family Command Center

homeassistant:
  name: Bodenburg Home
  unit_system: imperial
  temperature_unit: F
  time_zone: America/Chicago
  latitude: 44.8614
  longitude: -92.6277
  elevation: 273
  currency: USD
  country: US

# Enable default config (includes frontend, api, etc.)
default_config:

# HTTP Configuration
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 192.168.1.0/24
    - 192.168.3.0/24
  cors_allowed_origins:
    - http://localhost:5173
    - http://192.168.1.178:5173
    - http://192.168.1.132:5173

# Logger
logger:
  default: info
  logs:
    homeassistant.components.nest: debug

# Text to speech
tts:
  - platform: google_translate

# Automation & Scripts
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml

# Calendar integrations (via iCal)
# These will be configured via UI after first boot

# Sensor configurations
sensor:
  # Weather (using Open-Meteo - no API key needed)
  - platform: rest
    name: "Weather Data"
    resource: "https://api.open-meteo.com/v1/forecast?latitude=44.8614&longitude=-92.6277&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timezone=America%2FChicago"
    scan_interval: 600
    json_attributes:
      - current
      - daily
    value_template: "{{ value_json.current.temperature_2m }}"

# Template sensors for easy access
template:
  - sensor:
      - name: "Current Temperature"
        unit_of_measurement: "Â°F"
        state: "{{ state_attr('sensor.weather_data', 'current').temperature_2m | round(0) }}"
      - name: "Current Humidity"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.weather_data', 'current').relative_humidity_2m }}"
      - name: "Wind Speed"
        unit_of_measurement: "mph"
        state: "{{ state_attr('sensor.weather_data', 'current').wind_speed_10m | round(0) }}"
